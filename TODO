
* [BUG]: program crashes (MS Win 9x) when data contains NaN (as a result
  of asin(x) x>1) and "Zoom all" is called.

* (DOC) howto add new built-in function 

* (DOC) update list of functions

* [BUG] unconfirmed -- program crashes when trying to add a peak 
        (Fedora development, GCC 4.1)

------------- next release here (?)

* logarithmic scale  

* Settings dialog: explainations like: 
   "Note: if you want to have these settings
   after program restart, put proper commands into file $HOME/.fityk/init
   or equivalent."
   Tab "Layout" with explaination, how GUI settings are handled.

* (GUI) data-range mode: if all points are active, left mouse button
  should "select", not "activate", ie. it should do A = (left<x<right)  (?)

------------- next release here (?)

* DataExpressionGrammar: 
    %func(DataExpressionG) #OP_FUNC number #eg. Y = y-%peak(x)       
    F(DataExpressionG)     #OP_CURVE_Y number
    Z(DataExpressionG)     #OP_CURVE_DX number
    %peak[area]            #OP_NUMBER
    numarea (%f, x1, x2, step) #OP_NUMBER # numarea or quadrature ?
    # search x for which %f(x)==value, based on rtsafe, NR p. 366
    # value must be bracketed by x1 and x2
    findvalue (%f, x1, x2, value) # OP_NUMBER 
        - to avoid ambiguity,  '%' should be replaced with 'mod' (?)
    '&' -> ',' (?)
    aggregate functions: min, max, sum, avg, stddev, eg.  min(y if 20<x<25)
      area function:  area(y-F(x) if 20<x<25)    -> (x[n+1]-x[n-1])/2 * t
    parametrized functions with parameters as expression: spline[x if ...](x)
      ->step equilibration: X = x[0] + (x[-1]-x[0])/(M-1) * n
     			  & Y = interpolate[x y](X)
     			  & S = interpolate[x s](X)
     			  & A = interpolate[x a](X)
    [BUG] sum() doesn't work in "info sum(x)" or $a={sum(y)}
    new functions: randuniform[a b]() randnormal[mu sigma]()

* mixed data/sum export, eg:
  x, y, abs(y-F(x)), %foo(x), %bar(x) > file #only active points are exported
  "*F" expands to all functions in F

* (F > file) when exporting function/sum as points, it shuld be possible 
  to set step of these points (eg. F [from:to:step] > file
  and to export baseline and each peak as a separately (multicolumn CSV) 

------------- next release here (?)

* (GUI) when printing, everything is first rescaled and rounded(!!!) for
  plot window at the screen, and then rescaled to the paper size. 
  This rounding causes visible artefacts at the printout.
  (wxDC.GetSize instead of plot.GetClientSize() ?)

* (GUI) redrawing for many datasets (~100) takes noticable time.
  Kind of plot buffering (as a bitmap).

* (GUI) sidebar: default column widths should be different

* GUI [BUG] aux. plot - when program is called with script as an argument
   aux. plot looks strange at the start of the program until it is replotted

* (GUI) peak dragging -- sensible scaling of parameter changes 
           (problems with width changing)

* (GUI) show function limits when cursor is over peak top

* improve Voigt function (cut-tails, better approx?) 

* (GUI) vertical scaling using mouse on main plot near to left edge of the plot 

------------- next release here (?)

* (GUI) use numeric pad keys (WXK_NUMPAD_*) as shortcuts for changing 
	function parameters.

* (GUI) more extensive and configurable (2/3 buttons, size) mouse hints 
	   (also for aux. plot, etc)

* [internal] UI - two implementations of one class are bad idea  
	     it must be a base class (virtual?) with derived GUI and CLI

* GUI: it should be possible to constrain two parameters of two peak,
     at least to make them equal.

* GUI: easy way to do: F[hwhm]=..., F[shape]=...;

* GUI: button 'freeze' on variables pane

* cmd: any-command with option=value 
         -- set value of option for this command only

* Fitting 
	settings: GUI, fitting
	greyed fit-continue menu/button
	cmd: fit with more options
	simulated annealing (it can replace LM shake_before option)
	autoplot option -> fitting tab, checkbox: replot-after-fit-iteration

* GUI: menu Functions:
  Functions > Peak-Find Info -> animation
  Functions > Multidata P-F Info -> window with list of parameters (Xview-like)

* parameter domain ~3[2,14]

* Function: check_parameters_out_of_domain() ?  
             eg. in Pearson shape > 0.5 , shape < 1e9
	     called from fitting iteration?
	     what if parameter is out-of-domain? change? disable function?
	                                          change and freeze?
	     set fit-fix-parameters-times = 5
	    simple-var bounds?

* GUI: Data Editor - left/right/top/bottom - magic keywords: user would be
       asked to select point/range/rectangle in plot

* history  (data / sum / view / all)

* cmd/GUI: plot peak-groups: ==> plot (%a+%b+%c)  

* (GUI) different peak-draft for steps (new function category), 
         and for other functions

* [internal] are functions recalculate()'d when neccessary? eg.before copy(%f)?

* [internal] mark parameters, which are not used in sum calculation, and don't
             put it into matrix used by gradient methods(?)

* (GUI) where config files should be stored on MS Windows? Registry of file?

------------------ 

* view with/without background button (like in 0.4.x, requires storing
  background points)

* user defined functions derived from other functions:
   define GaussianA(area, center, fwhm): \
      Gaussian(area/fwhm/sqrt(pi*ln(2)), center, fwhm)

* user defined functions:
      - syntax:
        --> define Gaussian(a,pos,width): a*exp(-((x-pos)/width)^2)
	                   ^^^ any name but 'x' allowed here
	--> %g = Gaussian(1,$b,~3.4)
      - more sophisticated simplifications of expressions and CSE(!)
      - calculating limits, width, area, etc. for UDF(!)

------------------ 

* (CODE STYLE) use smart pointers: 
  http://www.boost.org/libs/smart_ptr/smart_ptr.htm
  (the library will be distributed in 3rdparty/boost)

* build engine (everything but GUI/CLI interface) as a library
  with documented API.

* there are problems with refreshing plots and output window when program
  is busy (ie. when running script or fitting). It seems to be platform
  dependent.

* auto-freezing of peaks at disactivated range

* loading data -- use Difdaf library (when it will be ready) for powder
  diffraction data import.
  other formats (from survey): .jdx JCAMP-DX (www.jcamp.org)
		         Galactic (GRAMS/32) SPC files (especially multifiles)
			 Vamas (vms), 
			 multipart Siemens .raw data files
			 uxd,udf

* (GUI) single dialog for configuring main plot
  data point size and other properties can be put on data pane

* (GUI, BUG) in Configure axes / peak labels: fonts are changed event
  if Apply is not pressed

* python scripts  -- built-in Python interpreter which allows to extend 
  Fityk using user-written scripts, optional modules, etc. 
  [IMPORTANT]

* rewrite crystallographic part in python
  [IMPORTANT]

* (GUI) stopping fitting interactively (when user don't want to wait longer);
  use threads? or wxTimer?

* automatic background substraction - what are good algorithms?

* more sophisticated algorithms for peak detection

* fitting: it should be separated even more from the rest of the program.
  Perhaps it fitting functions should be in extern library (COOOL,
  GAUL, WNLIB, netlib, OOL.sf.net
  are there any other such libraries? 
  I haven't investigated the possibility of using mentioned libs yet. 
  Links: http://coool.mines.edu/ http://gaul.sourceforge.net/, 
  http://www.willnaylor.com/wnlib.html,
  http://sal.jyu.fi/B/3/index.shtml, http://coin-or.org,
  http://www-unix.mcs.anl.gov/otc/Guide/faq/nonlinear-programming-faq.html) 

* fitting: robust fit - other error distributions then Gaussian, 
  eg. Lorenzian...; so called 'maximum-likelihood method' -- using Poisson
  error distribution.

* info -- more informations about error, confidence limits, etc.
  graphical interface Fit > Info
  easy way to get (write to file) parameters with errors [IMPORTANT]

* Now only '.' is supported as a decimal separator. ',' should also
  be an option.

* (GUI) "Report Bug" item in Help menu, clickable link in About dialog
        (after raising minimal required wxWidgets to 2.6.1)

* investigate LLVM - can it be used for faster calculation of 
  user-defined functions?

